<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Time Between Hours Calculator</title>
  <style>
    body {
      background: #faf7f4;
      font-family: 'Georgia', 'Times New Roman', Times, serif;
      margin: 0;
    }
    .container {
      max-width: 420px;
      margin: 48px auto;
      background: #fff;
      border-radius: 14px;
      padding: 24px 20px 18px 20px;
      border: 1.5px solid #eee;
      box-shadow: 0 2px 18px rgba(173,42,36,0.06);
    }
    h2 {
      margin: 0 0 6px 0;
      font-size: 2em;
      color: #ad2a24;
      font-weight: bold;
      letter-spacing: -1px;
      text-align: center;
    }
    .top-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 14px;
      justify-content: center;
    }
    .top-row label,
    .top-row select {
      font-size: 1em;
      color: #771e17;
    }
    .top-row input[type="checkbox"] {
      accent-color: #ad2a24;
      width: 18px; height: 18px;
      vertical-align: middle;
    }
    .straight-line {
      height: 3px;
      background: #ad2a24;
      border: none;
      border-radius: 2px;
      margin: 8px 0 10px 0;
    }
    h4 {
      margin-top: 20px;
      margin-bottom: 7px;
      font-size: 1.11em;
      color: #ad2a24;
      font-weight: 600;
      letter-spacing: 0.2px;
    }
    .row {
      display: flex;
      gap: 8px;
      align-items: center;
      margin-bottom: 14px;
    }
    .input-block {
      background: #fff7f4;
      border-radius: 7px;
      padding: 8px 10px;
      margin-bottom: 2px;
      box-sizing: border-box;
    }
    input[type="number"], select {
      padding: 5px 6px;
      font-size: 1em;
      border-radius: 4px;
      border: 0.3px solid #080808;
      background: #fffaf7;
      color: #751a14;
      transition: box-shadow 0.18s;
      outline: none;
    }
    input[type="number"]:focus, select:focus {
      box-shadow: 0 0 6px #ad2a2440;
    }
    button {
      padding: 8px 18px;
      border: none;
      border-radius: 8px;
      background: #ad2a24;
      color: #fff9f5;
      font-size: 1em;
      font-family: inherit;
      font-weight: bold;
      box-shadow: 0 1px 5px #ad2a2420;
      margin-right: 7px;
      cursor: pointer;
      transition: transform 0.13s, box-shadow 0.13s, background 0.17s;
    }
    button:last-child { margin-right: 0; }
    button:hover, button:focus {
      transform: scale(1.08);
      box-shadow: 0 5px 14px #ad2a2440;
      background: #bc2e28;
      outline: none;
    }
    button:active {
      transform: scale(0.96);
      background: #ad2a24;
    }
    button:disabled {
      background: #ecdde0;
      color: #ad9a94;
      box-shadow: none;
      cursor: not-allowed;
      transform: none;
    }
    .result-block {
      background: #f3c8c2;
      border-radius: 10px;
      margin-top: 34px;
      padding: 13px 20px;
      border: 1.1px solid #ad2a24;
      color: #ad2a24;
      font-size: 1.12em;
      font-family: inherit;
      font-weight: normal;
      display: none;
      transition: opacity 0.27s;
      word-break: break-word;
      min-height: 36px;
    }
    .show-result {
      display: block;
      opacity: 1;
      animation: fadePop 0.4s;
    }
    @keyframes fadePop {
      0% { opacity: 0; transform: scale(0.97);}
      80% {opacity: 1; transform: scale(1.04);}
      100% {opacity: 1; transform: scale(1);}
    }
    .result-bold {
      font-weight: bold;
      font-size: 1.14em;
      color: #ad2a24;
      letter-spacing: 1px;
      background: #fff3ed;
      padding: 4px 8px;
      border-radius: 7px;
      display: inline-block;
      margin-top: 6px;
    }
    .error {
      color: #ad2a24;
      font-weight: bold;
      font-size: 1em;
      margin-top: 15px;
      background: #ffe5e2;
      padding: 7px 12px 6px 12px;
      border-radius: 8px;
      border: 1px solid #ad2a24;
      display: none;
    }
    .error.show {
      display: block;
      animation: fadePop 0.3s;
    }
    #calcBtn{
        color:#eef5ec;
        background-color: #4ee022;
        font-size: larger;
    }
  </style>
</head>
<body>
<div class="container">
  <h2>Time Between Hours Calculator</h2>
  <div class="top-row">
    <label for="format">Time Format:</label>
    <select id="format">
      <option value="24">24-hour</option>
      <option value="12">12-hour (AM/PM)</option>
    </select>
    <label>
      <input type="checkbox" id="includeSeconds"> Include Seconds
    </label>
  </div>
  <div class="straight-line"></div>
  <div>
    <h4>Start Time</h4>
    <div class="input-block">
      <div class="row" id="startTimeInputs"></div>
    </div>
  </div>
  <div>
    <h4>End Time</h4>
    <div class="input-block">
      <div class="row" id="endTimeInputs"></div>
    </div>
  </div>
  <div class="row">
    <button type="button" id="swapBtn" title="Swap Start/End Times">Swap</button>
    <button type="button" id="resetBtn" title="Reset Inputs">Reset</button>
    <button type="button" id="calcBtn" title="Calculate Time Difference">Calculate</button>
  </div>
  <div id="error" class="error"></div>
  <div id="output" class="result-block"></div>
</div>

<script>
const startTimeInputs = document.getElementById("startTimeInputs");
const endTimeInputs = document.getElementById("endTimeInputs");
const formatSelect = document.getElementById("format");
const includeSecondsCheckbox = document.getElementById("includeSeconds");
const swapBtn = document.getElementById("swapBtn");
const resetBtn = document.getElementById("resetBtn");
const calcBtn = document.getElementById("calcBtn");
const outputDiv = document.getElementById("output");
const errorDiv = document.getElementById("error");

function createTimeInputs(prefix, format, showSeconds, values={}) {
  const hourInput = document.createElement("input");
  hourInput.type = "number";
  hourInput.min = format=="12" ? 1 : 0;
  hourInput.max = format=="12" ? 12 : 23;
  hourInput.value = values.hour!=null ? values.hour : (format=="12"?1:0);
  hourInput.placeholder = "Hour";
  hourInput.id = prefix+"Hour";
  hourInput.required = true;

  const minuteInput = document.createElement("input");
  minuteInput.type = "number";
  minuteInput.min = 0; minuteInput.max = 59;
  minuteInput.value = values.minute!=null ? values.minute : 0;
  minuteInput.placeholder = "Min";
  minuteInput.id = prefix+"Minute";
  minuteInput.required = true;

  let secondInput = null;
  if (showSeconds) {
    secondInput = document.createElement("input");
    secondInput.type = "number";
    secondInput.min = 0; secondInput.max = 59;
    secondInput.value = values.second!=null ? values.second : 0;
    secondInput.placeholder = "Sec";
    secondInput.id = prefix+"Second";
  }

  let ampmSelect = null;
  if (format=="12") {
    ampmSelect = document.createElement("select");
    ampmSelect.id = prefix+"AMPM";
    ["AM","PM"].forEach(val=>{
      const opt = document.createElement("option");
      opt.value = val; opt.textContent = val;
      ampmSelect.appendChild(opt);
    });
    ampmSelect.value = values.ampm || "AM";
  }

  const inputs = [hourInput, document.createTextNode(":"), minuteInput];
  if (showSeconds) {
    inputs.push(document.createTextNode(":"));
    inputs.push(secondInput);
  }
  if (format=="12") inputs.push(ampmSelect);

  return { elements:inputs, hourInput, minuteInput, secondInput, ampmSelect };
}

function renderInputs() {
  const format = formatSelect.value;
  const showSeconds = includeSecondsCheckbox.checked;
  function getValues(prefix) {
    return {
      hour: Number(document.getElementById(prefix+"Hour")?.value ?? (format=="12"?1:0)),
      minute: Number(document.getElementById(prefix+"Minute")?.value ?? 0),
      second: document.getElementById(prefix+"Second") ? Number(document.getElementById(prefix+"Second").value) : null,
      ampm: document.getElementById(prefix+"AMPM")?.value ?? "AM"
    };
  }
  const startVals = getValues("start");
  const endVals = getValues("end");
  startTimeInputs.innerHTML = '';
  endTimeInputs.innerHTML = '';
  const start = createTimeInputs("start", format, showSeconds, startVals);
  const end = createTimeInputs("end", format, showSeconds, endVals);
  start.elements.forEach(e=>startTimeInputs.appendChild(e));
  end.elements.forEach(e=>endTimeInputs.appendChild(e));
  // Hide output and error after changing time format/seconds
  outputDiv.classList.remove("show-result");
  errorDiv.classList.remove("show");
  outputDiv.innerHTML = "";
  errorDiv.innerHTML = "";
}

function getTime(prefix) {
  const format = formatSelect.value;
  const hour = Number(document.getElementById(prefix+"Hour").value);
  const minute = Number(document.getElementById(prefix+"Minute").value);
  let second = includeSecondsCheckbox.checked ? Number(document.getElementById(prefix+"Second").value) : 0;
  let ampm = format==="12" ? document.getElementById(prefix+"AMPM").value : null;
  return { hour, minute, second, ampm };
}

function validateInputs(time, format) {
  if (format=="12") {
    if (!(time.hour>=1 && time.hour<=12)) return "Hour must be 1-12.";
  } else {
    if (!(time.hour>=0 && time.hour<=23)) return "Hour must be 0-23.";
  }
  if (!(time.minute>=0 && time.minute<=59)) return "Minute must be 0-59.";
  if (includeSecondsCheckbox.checked && !(time.second>=0 && time.second<=59)) return "Second must be 0-59.";
  return "";
}
function pad(n){return String(n).padStart(2,"0");}
function formatDisplay(time, format) {
  if (format=="12") {
    return `${pad(((time.hour-1)%12)+1)}:${pad(time.minute)}${includeSecondsCheckbox.checked?`:${pad(time.second)}`:""} ${time.ampm}`
  } else {
    return `${pad(time.hour)}:${pad(time.minute)}${includeSecondsCheckbox.checked?`:${pad(time.second)}`:""}`
  }
}
function to24Hour(hour, ampm) {
  if (ampm=="AM") return hour==12?0:hour;
  else return hour==12?12:hour+12;
}
function toSeconds(time, format) {
  let h = format=="12"?to24Hour(time.hour, time.ampm):time.hour;
  let m = time.minute;
  let s = includeSecondsCheckbox.checked ? time.second : 0;
  return h*3600 + m*60 + s;
}

function calculateResult() {
  errorDiv.innerHTML = "";
  errorDiv.classList.remove("show");
  outputDiv.innerHTML = "";
  outputDiv.classList.remove("show-result");

  const format = formatSelect.value;
  const start = getTime("start");
  const end = getTime("end");

  let errStart = validateInputs(start, format);
  let errEnd = validateInputs(end, format);
  if (errStart || errEnd) {
    errorDiv.innerHTML = (errStart ? "Start time: " + errStart : "") +
                         (errEnd ? "<br>End time: " + errEnd : "");
    errorDiv.classList.add("show");
    return;
  }

  const s1 = toSeconds(start, format);
  const s2 = toSeconds(end, format);
  let diff = s2 - s1;
  let abs = false;
  if (diff<0) {abs=true;diff=-diff;}

  let hours = Math.floor(diff/3600);
  let mins = Math.floor((diff%3600)/60);
  let secs = diff%60;

  let resultBold = `<span class="result-bold">${hours} hour${hours!==1?"s":""}, ${mins} minute${mins!==1?"s":""}`;
  if (includeSecondsCheckbox.checked)
    resultBold += `, ${secs} second${secs!==1?"s":""}`;
  resultBold += `</span>`;

  let heading = abs?`Time difference (absolute):`:`Result:`;

  outputDiv.innerHTML = `<b>From:</b> ${formatDisplay(start, format)}<br>
    <b>To:</b> ${formatDisplay(end, format)}<br>
    <div style="margin-top:8px"><span style="font-weight:bold;color:#ad2a24">${heading}</span><br>${resultBold}</div>`;
  outputDiv.classList.add("show-result");
}

function reset() {
  formatSelect.value = "24";
  includeSecondsCheckbox.checked = false;
  renderInputs();
  errorDiv.innerHTML = "";
  outputDiv.innerHTML = "";
  errorDiv.classList.remove("show");
  outputDiv.classList.remove("show-result");
}
function swapInputs() {
  const format = formatSelect.value;
  let s = getTime("start");
  let e = getTime("end");
  startTimeInputs.innerHTML = '';
  endTimeInputs.innerHTML = '';
  let startElems = createTimeInputs("start", format, includeSecondsCheckbox.checked, e);
  let endElems = createTimeInputs("end", format, includeSecondsCheckbox.checked, s);
  startElems.elements.forEach(e=>startTimeInputs.appendChild(e));
  endElems.elements.forEach(e=>endTimeInputs.appendChild(e));
  outputDiv.innerHTML = "";
  outputDiv.classList.remove("show-result");
  errorDiv.innerHTML = "";
  errorDiv.classList.remove("show");
}

formatSelect.onchange = renderInputs;
includeSecondsCheckbox.onchange = renderInputs;
calcBtn.onclick = calculateResult;
resetBtn.onclick = reset;
swapBtn.onclick = swapInputs;

renderInputs();
</script>
</body>
</html>
